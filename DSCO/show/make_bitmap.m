% MAKE BITMAP IMAGE OF MULTIPHASE TOPOLOGY
function [Map,name] = make_bitmap(angle,nx,ny,den)
% [1 0 0] 红色 <------对应------> 青蓝
% [1 1 0] 黄色 <------对应------> 蓝色
% [0 0 1] 蓝色 <------对应------> 黄色
% [0 1 1] 青蓝 <------对应------> 红色
% [1 0 1] 品红 <------对应------> 绿色
% [0 1 0] 绿色 <------对应------> 品红
% [0 0 0] 黑色 <------对应------> 白色
% [1 1 1] 白色 <------对应------> 黑色
% color = [1 0 0; 1 1 0; 0 0 1; 0 1 1; 1 0 1; 0 1 0; 0 0 0];
% color = [1-74/255 1-72/255 1-92/255; 1-99/255 1-133/255 1-167/255; 1-217/255 1-208/255 1-199/255; 1-215/255 1-150/255 1-145/255; 1 0 1; 0 1 0; 0 0 0];
% color = [1-120/255 1-97/255 1-192/255; 1-93/255 1-138/255 1-97/255; 1-241/255 1-194/255 1-55/255; 1-215/255 1-76/255 1-73/255; 1 0 1; 0 1 0; 0 0 0];
% color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-198/255 1-235/255 1-241/255; 1-242/255 1-68/255 1-67/255; 1 0 1; 0 1 0; 0 0 0];
%%
if isequal(angle,[0,-45,45,90])%angle ==[0,-45,45,90]  %[0,-45,45,90]
    color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255; 0 0 0;];
elseif isequal(angle,[0,-30,30,90])%angle ==[0,-45,45,90]  %[0,-45,45,90]
    color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255; 0 0 0;];
elseif isequal(angle,[0,-60,60,90])%angle ==[0,-45,45,90]  %[0,-45,45,90]
    color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255; 0 0 0;];
elseif isequal(angle,[0 90])%angle == [0 90]   % [0 90]
    color = [1-77/255 1-59/255 1-116/255; 1-242/255 1-68/255 1-67/255;0 0 0];
elseif isequal(angle,[0,-45,45,90,-30,30])%angle == [0,-45,45,90,-30,30]
    color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255;1-89/255 1-218/255 1-65/255;1-207/255 1-242/255 1-126/255; 0 0 0];
elseif isequal(angle,[0,-45,45,90,-60,60]) % angle == [0,-45,45,90,-60,60]
     color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255;1-115/255 1-61/255 1-39/255; 1-242/255 1-115/255 1-41/255; 0 0 0];
elseif isequal(angle,[0,-45,45,90,-30,-60]) % angle == [0,-45,45,90,-30,-60]
     color = [1-77/255 1-59/255 1-116/255; 1-83/255 1-117/255 1-162/255; 1-217/255 1-160/255 1-91/255; 1-242/255 1-68/255 1-67/255;1-115/255 1-61/255 1-39/255; 1-242/255 1-115/255 1-41/255; 0 0 0];       

end
%%
% color = [1-120/255 1-97/255 1-192/255; 1-93/255 1-138/255 1-97/255; 1-241/255 1-194/255 1-55/255; 1-215/255 1-76/255 1-73/255; 1 0 1; 0 1 0; 0 0 0];
p = length(angle);
switch p
    case 2
        name = ['(',num2str(angle(1)),'):青蓝','  (',num2str(angle(2)),')蓝色'];
    case 3
        name = ['(',num2str(angle(1)),'):青蓝','  (',num2str(angle(2)),')蓝色', ...
            '  (',num2str(angle(3)),')黄色'];
    case 4
%         name = ['(',num2str(angle(1)),'):青蓝','  (',num2str(angle(2)),')蓝色', ...
%             '  (',num2str(angle(3)),')黄色', '  (',num2str(angle(4)),')红色'];
        name = ['(',num2str(angle(1)),'):purple','  (',num2str(angle(2)),')yellow', ...
            '  (',num2str(angle(3)),')blue', '  (',num2str(angle(4)),')red'];
    case 5
        name = ['(',num2str(angle(1)),'):青蓝','  (',num2str(angle(2)),')蓝色', ...
            '  (',num2str(angle(3)),')黄色', '  (',num2str(angle(4)),')红色', ...
            '  (',num2str(angle(5)),')绿色'];
    case 6
        name = ['(',num2str(angle(1)),'):青蓝','  (',num2str(angle(2)),')蓝色', ...
            '  (',num2str(angle(3)),')黄色', '  (',num2str(angle(4)),')红色', ...
            '  (',num2str(angle(5)),')绿色', '  (',num2str(angle(6)),')品红'];
    case 7
        name = ['(',num2str(angle(1)),'):紫色','  (',num2str(angle(2)),')棕黄', ...
            '  (',num2str(angle(3)),')蓝色', '  (',num2str(angle(4)),')红色', ...
            '  (',num2str(angle(5)),')绿色', '  (',num2str(angle(6)),')黄色',...
            '(',num2str(angle(7)),')翠绿'];
    case 8
        name = ['(',num2str(angle(1)),'):紫色','  (',num2str(angle(2)),')棕黄', ...
            '  (',num2str(angle(3)),')蓝色', '  (',num2str(angle(4)),')红色', ...
            '  (',num2str(angle(5)),')绿色', '  (',num2str(angle(6)),')黄色',...
            '(',num2str(angle(7)),')翠绿', '(',num2str(angle(8)),')大红'];
        
    otherwise
end
Map = zeros(nx*ny,3);
for i = 1:nx*ny
    [val,ind] = max(den(i,:));
    Map(i,1:3) = val*color(ind,:);
    if(length(find(den(i,:)<0.05))==p)
        Map(i,1:3) = [0 0 0];
    end
    if(length(find(den(i,:)>0.95))>1)
        Map(i,1:3) = [1 1 1];
    end
end
Map = reshape(Map,ny,nx,3);
end